<!-- pages/profile.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile | TravelWitty</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .profile-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin-top: 30px;
            margin-bottom: 30px;
            max-width: 800px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 15px;
        }
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #6e8efb;
        }
        .logo span {
            color: #a777e3;
        }
        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: bold;
            color: #6c757d;
            margin: 0 auto 20px;
            border: 5px solid #f8f9fa;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
        }
        .profile-img:hover .edit-overlay {
            opacity: 1;
        }
        .edit-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            cursor: pointer;
        }
        .edit-overlay i {
            color: white;
            font-size: 24px;
        }
        .profile-details {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }
        .form-label {
            font-weight: 600;
            color: #444;
        }
        .nav-tabs {
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        .nav-link {
            color: #666;
            font-weight: 600;
            padding: 10px 15px;
            border: none;
        }
        .nav-link.active {
            color: #6e8efb;
            background: transparent;
            border-bottom: 3px solid #6e8efb;
        }
        .btn-primary {
            background: #6e8efb;
            border-color: #6e8efb;
        }
        .btn-primary:hover {
            background: #5d7bf9;
            border-color: #5d7bf9;
        }
        .btn-danger {
            background: #ff6b6b;
            border-color: #ff6b6b;
        }
        .btn-danger:hover {
            background: #ff5252;
            border-color: #ff5252;
        }
        .back-link {
            text-decoration: none;
            color: #6e8efb;
            font-weight: 600;
            margin-right: 15px;
        }
        .back-link i {
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="profile-container mx-auto">
            <div class="header">
                <a href="dashboard.html" class="back-link">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
                <div class="logo">Travel<span>Witty</span></div>
            </div>
            
            <ul class="nav nav-tabs" id="profileTabs">
                <li class="nav-item">
                    <a class="nav-link active" id="profile-tab" data-bs-toggle="tab" href="#profile">Profile Details</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="security-tab" data-bs-toggle="tab" href="#security">Security</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="preferences-tab" data-bs-toggle="tab" href="#preferences">Travel Preferences</a>
                </li>
            </ul>
            
            <div class="tab-content">
                <div class="tab-pane fade show active" id="profile">
                    <div class="profile-img" id="profileImage">
                        ðŸ‘¤
                        <div class="edit-overlay" onclick="document.getElementById('profilePicInput').click()">
                            <i class="fas fa-camera"></i>
                        </div>
                    </div>
                    <input type="file" id="profilePicInput" style="display: none;" accept="image/*">
                    
                    <form id="profileForm">
                        <div class="profile-details">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="firstName" class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="firstName" value="John">
                                </div>
                                <div class="col-md-6">
                                    <label for="lastName" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="lastName" value="Doe">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="email" value="johndoe@example.com">
                            </div>
                            <div class="mb-3">
                                <label for="phone" class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="phone" value="">
                            </div>
                            <div class="mb-3">
                                <label for="address" class="form-label">Address</label>
                                <textarea class="form-control" id="address" rows="2"></textarea>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary w-100" onclick="saveProfileChanges()">Save Changes</button>
                    </form>
                </div>
                
                <div class="tab-pane fade" id="security">
                    <div class="profile-details">
                        <div class="mb-3">
                            <label for="currentPassword" class="form-label">Current Password</label>
                            <input type="password" class="form-control" id="currentPassword">
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">New Password</label>
                            <input type="password" class="form-control" id="newPassword">
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Confirm New Password</label>
                            <input type="password" class="form-control" id="confirmPassword">
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary w-100 mb-3" onclick="changePassword()">Update Password</button>
                    <button type="button" class="btn btn-danger w-100" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">Delete Account</button>
                </div>
                
                <div class="tab-pane fade" id="preferences">
                    <div class="profile-details">
                        <div class="mb-3">
                            <label class="form-label">Preferred Travel Style</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="luxury">
                                <label class="form-check-label" for="luxury">Luxury</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="budget">
                                <label class="form-check-label" for="budget">Budget-friendly</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="adventure">
                                <label class="form-check-label" for="adventure">Adventure</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="cultural">
                                <label class="form-check-label" for="cultural">Cultural</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="preferredCurrency" class="form-label">Preferred Currency</label>
                            <select class="form-select" id="preferredCurrency">
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR (â‚¬)</option>
                                <option value="GBP">GBP (Â£)</option>
                                <option value="JPY">JPY (Â¥)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="language" class="form-label">Preferred Language</label>
                            <select class="form-select" id="language">
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary w-100" onclick="savePreferences()">Save Preferences</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Account Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Delete Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-danger">Warning: This action cannot be undone.</p>
                    <p>Are you sure you want to delete your account? All your data will be permanently removed.</p>
                    <div class="mb-3">
                        <label for="deleteConfirmPassword" class="form-label">Enter your password to confirm</label>
                        <input type="password" class="form-control" id="deleteConfirmPassword">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="deleteAccount()">Delete Account</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load user data on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
        });

        function loadUserData() {
            // In a real app, you would fetch this from your database
            // For now, we'll simulate loading data
            const userData = {
                firstName: "John",
                lastName: "Doe",
                email: "johndoe@example.com",
                phone: "+1 (555) 123-4567",
                address: "123 Main St, Anytown, USA",
                preferences: {
                    travelStyles: ["luxury", "cultural"],
                    currency: "USD",
                    language: "en"
                }
            };
            
            // Populate form fields
            document.getElementById('firstName').value = userData.firstName;
            document.getElementById('lastName').value = userData.lastName;
            document.getElementById('email').value = userData.email;
            document.getElementById('phone').value = userData.phone;
            document.getElementById('address').value = userData.address;
            
            // Update user greeting in the header
            document.getElementById('user-info').textContent = `Welcome, ${userData.firstName}!`;
            
            // Set preferences
            if (userData.preferences) {
                if (userData.preferences.travelStyles) {
                    userData.preferences.travelStyles.forEach(style => {
                        const checkbox = document.getElementById(style);
                        if (checkbox) checkbox.checked = true;
                    });
                }
                
                const currencySelect = document.getElementById('preferredCurrency');
                if (currencySelect && userData.preferences.currency) {
                    currencySelect.value = userData.preferences.currency;
                }
                
                const langSelect = document.getElementById('language');
                if (langSelect && userData.preferences.language) {
                    langSelect.value = userData.preferences.language;
                }
            }
        }

        function saveProfileChanges() {
            // Get form values
            const userData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value
            };
            
            // In a real app, you would send this data to your server/database
            console.log("Saving profile data:", userData);
            
            // Simulate successful save
            alert("Profile updated successfully!");
            
            // Update display name
            document.getElementById('user-info').textContent = `Welcome, ${userData.firstName}!`;
        }

        function changePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Basic validation
            if (!currentPassword || !newPassword || !confirmPassword) {
                alert("Please fill in all password fields.");
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert("New passwords do not match.");
                return;
            }
            
            // In a real app, you would verify the current password and update with the new one
            console.log("Changing password");
            
            // Simulate successful password change
            alert("Password updated successfully!");
            
            // Clear password fields
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }

        function savePreferences() {
            // Get selected travel styles
            const travelStyles = [];
            ['luxury', 'budget', 'adventure', 'cultural'].forEach(style => {
                if (document.getElementById(style).checked) {
                    travelStyles.push(style);
                }
            });
            
            const preferences = {
                travelStyles: travelStyles,
                currency: document.getElementById('preferredCurrency').value,
                language: document.getElementById('language').value
            };
            
            // In a real app, you would send this data to your server/database
            console.log("Saving preferences:", preferences);
            
            // Simulate successful save
            alert("Preferences updated successfully!");
        }

        function deleteAccount() {
            const password = document.getElementById('deleteConfirmPassword').value;
            
            if (!password) {
                alert("Please enter your password to confirm account deletion.");
                return;
            }
            
            // In a real app, you would verify the password and then delete the account
            console.log("Deleting account");
            
            // Simulate successful account deletion
            alert("Account deleted successfully. Redirecting to homepage...");
            window.location.href = "index.html";
        }

        // Handle profile image upload
        document.getElementById('profilePicInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // In a real app, you would upload this to your server
                    // For now, just display the selected image
                    const profileImg = document.getElementById('profileImage');
                    profileImg.innerHTML = `<img src="${e.target.result}" style="width: 100%; height: 100%; object-fit: cover;">`;
                    profileImg.appendChild(document.querySelector('.edit-overlay'));
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>